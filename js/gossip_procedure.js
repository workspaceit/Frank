/* * For Invitation Gossip View */$(document).ready(function () {    console.log("ping");    //  load_gossip_view_by_gossip_id();});/* * For Showing New Gossip Tab */$(document).ready(function () {    var action_fn = $('#onload_js_fn').attr("value");    if (action_fn == "new_gossip") {        show_make_gossip();    }});function show_make_gossip() {    $('#tab1_li').removeClass("active");    $('#tab3_li').addClass("active");    $('#tab1').removeClass("tab_content active").addClass("tab_content hide");    $('#tab3').removeClass("tab_content hide").addClass("tab_content active");    $('#gossip_thread_value').focus();    window.scrollTo(0, 600);}$(document).ready(function () {    $("input#gossip_for_target_search_text").autocomplete({        source: function (request, response) {            $.ajax({                url: $('#site_url').val() + 'suggestion/get_name',                data: {term: $("#gossip_for_target_search_text").val()},                dataType: "json",                type: "POST",                success: function (data) {                    response(data);                }            });        },        minLength: 1    });    $("input#gossip_from_target_search_text").autocomplete({        source: function (request, response) {            $.ajax({                url: $('#site_url').val() + 'suggestion/get_name',                data: {term: $("#gossip_from_target_search_text").val()},                dataType: "json",                type: "POST",                success: function (data) {                    response(data);                }            });        },        minLength: 1    });});function why_so_serious() {    var key = Math.floor((Math.random() * 10) + 1);    var msg = "";    if (key == 1) {        msg = "Why So Serious";    } else if (key == 2) {        msg = "Comming Soon";    } else if (key == 3) {        msg = "Self Distruction in three second";    } else if (key == 4) {        msg = "We Hate Projects Manager";    } else if (key > 4) {        msg = "Under Construction";    }    alert(msg);}//Data Structure [s]function push_gossip_reply_trait_queue(trait_inf) {    if ($('#gossip_reply_trait_queue').attr("value") != "") {        var traits_queue = JSON.parse($('#gossip_reply_trait_queue').attr("value"));        if (is_gossip_reply_trait_inf_exist(traits_queue, trait_inf.trait_category_id)) {            var index = get_gossip_reply_trait_queue_index(traits_queue, trait_inf.trait_category_id);            var new_val = trait_inf;            traits_queue = replace_gossip_reply_trait_queue_val(traits_queue, index, new_val);        } else {            traits_queue.push(trait_inf);        }        $('#gossip_reply_trait_queue').attr("value", JSON.stringify(traits_queue));    } else {        $('#gossip_reply_trait_queue').attr("value", "[" + JSON.stringify(trait_inf) + "]");    }}function is_gossip_reply_trait_inf_exist(obj_val, keyWord) {    for (var i = 0; i < obj_val.length; i++) {        if (obj_val[i].trait_category_id == keyWord) {            return true;        }    }    return false;}function get_gossip_reply_trait_queue_index(obj_val, keyWord) {    for (var i = 0; i < obj_val.length; i++) {        if (obj_val[i].trait_category_id == keyWord) {            return i;        }    }    return -1;}function replace_gossip_reply_trait_queue_val(obj_val, index, new_val) {    obj_val[index] = new_val;    return obj_val;}function get_gossip_reply_trait_inf(trait_category_id, question_id, fake_point) {    return {question_id: question_id, trait_category_id: trait_category_id, fake_point: fake_point};}function get_gossip_reply_trait_queue() {    if ($('#gossip_reply_trait_queue').attr("value") == "") {        return "";    } else {        return JSON.parse($('#gossip_reply_trait_queue').attr("value"));    }}//Data Structure [e]function gossip_comment_like(element) {    submit_trait_like(1, element, $(element).parent().find(".gossip_for_me_hidden_content"));}function gossip_comment_dislike(element) {    submit_trait_like(-1, element, $(element).parent().find(".gossip_for_me_hidden_content"));}// Load Function [S]function load_gossip_view(type,initial,pagination,clearOffset) {    pagination = (typeof pagination == 'undefined' ? false : pagination);    clearOffset = (typeof clearOffset == 'undefined' ? false : clearOffset);    var offset = -1;    var limit = -1;    var paginationConfigAll = JSON.parse($('#paginationConfig').val());    var paginationConfig = (type=="for")?paginationConfigAll.for:paginationConfigAll.from;    if(clearOffset){        paginationConfig.offset = 0;        $('#paginationConfig').val(JSON.stringify(paginationConfig));    }    if(pagination){        offset = paginationConfig.offset*paginationConfig.limit;        limit =  paginationConfig.limit;        paginationConfig.offset++;    }    if(type=="for")       paginationConfigAll.for = paginationConfig;    else       paginationConfigAll.from = paginationConfig;    $('#paginationConfig').val(JSON.stringify(paginationConfigAll));    var trait_id = $('#gossip_' + type + '_target_trait').val().trim();    var relation_ship = $('#gossip_' + type + '_target_ralation').val();    var order = $('#gossip_' + type + '_target_order').val();    var person = $('#gossip_' + type + '_target_search_text').val();    var gossip_person_id = $('#gossip_person_id').val();    var url = $('#site_url').val() + "gossip/get_gossip_view";    if(!initial){        load_notification_bar("Loading...");        set_effect_on_content_by_element('.dummy_gfm_goss');    }    if (trait_id == "") {        load_notification_bar("Select a Trait");        show_error_then_hide(3000, "");        set_defult_effect_on_content_by_element(0, '.dummy_gfm_goss');        return false;    }    $.ajax({        url: url,        type: "post",        data: {            offset:offset,            limit:limit,            trait_id: trait_id,            relation_ship: relation_ship,            order: order,            gossip_person_id: gossip_person_id,            person: person,            type: type        },        success: function (data) {            var resp = JSON.parse(data);            if(resp.gossipCount>0){                //$('#gossip_' + type + '_content_div').fadeOut(500, function () {                //                //});                if(clearOffset)                    $('#gossip_' + type + '_content_div').html(resp.html);                else                    $('#gossip_' + type + '_content_div').append(resp.html);                $('#gossip_' + type + '_content_div').fadeIn(500);                $(".center").height($("#tab1").height()+150);            }            if(!initial) {                hide_notification_bar();                set_defult_effect_on_content_by_element(0, '.dummy_gfm_goss');            }        },        error: function () {        }    });}function load_gossip_reply_view(element) {    var parent_reply_container = $(element).parents("div.gfm_info").first();    var reply_container = $(parent_reply_container).prev().find(".reply_content_div");    var gosssip_reply_first_col = $('#gosssip_reply_first_col').html();    var gosssip_reply_second_col = $('#gosssip_reply_second_col').html();    var reply_parent = $(element).parents("div.gfm_info").first().prev().prev();    var reply_user_box_container = $(reply_parent).find(".gossiper_comm_ex").find(".gossip_replier");    var reply_topic_box_container = $(reply_parent).find(".goss_topic_extended").find(".gossip_reply_topic");    var url = $('#site_url').val() + "gossip/get_gossip_reply_view";    var gossip_id = $(parent_reply_container).prev().prev().find(".gossip_id").val();    ;    if ($(element).attr("view_action") == "true") {        $(reply_user_box_container).append(gosssip_reply_first_col);        $(reply_user_box_container).fadeIn(500);        $(reply_topic_box_container).append(gosssip_reply_second_col);        $(reply_topic_box_container).fadeIn(500, function () {            resizeTabHeight();        });        var reply_text_box = $(reply_topic_box_container).find('.reply_gossip_text');        $(reply_text_box).focus();        $(reply_text_box).attr("g_id", gossip_id);        $(reply_text_box).bind('keypress', function (e) {            if (e.keyCode == 13 && !e.shiftKey) {                var call_back_element = $(element).parents('.goss_tell_btn').first().prev().find(".dummy_view_all_gossip_btn");                $(this).attr("disabled", "disabled");                submit_gossip_reply($(this), element, call_back_element);            }        });        $(element).attr("view_action", "false");        /* Calling For reply Html         * Taking time to load view for eply         *         */        /*    load_notification_bar("Loading..");         set_effect_on_content_by_element('.center');         $.ajax({         url:url,         type:"post",         data:{         gossip_id:gossip_id         },         success:function(data){         clear_trait_queue();         $(element).attr("view_action","false");         $('.reply_gossip_content_div').fadeOut(500).promise().done(function(){         var resp=JSON.parse(data);         $(reply_user_box_container).append(resp.user_inf_box);         $(reply_user_box_container).fadeIn(500);         $(reply_topic_box_container).append(resp.reply_inf_box);         $(reply_topic_box_container).fadeIn(500,function(){         resizeTabHeight();         });         hide_notification_bar();         set_defult_effect_on_content_by_element(0,'.center');         $(reply_topic_box_container).find('.reply_gossip_text').focus();         $(reply_topic_box_container).find('.reply_gossip_text').bind('keypress', function(e) {         if(e.keyCode==13 && !e.shiftKey ){         var call_back_element=$(element).parents('.goss_tell_btn').first().prev().find(".dummy_view_all_gossip_btn");         $(this).attr("disabled","disabled");         submit_gossip_reply($(this),element,call_back_element);         }         });         //Not Required In This Version         //                      reply_container.html(data);         //                    reply_container.fadeIn(500,function(){         //                         resizeTabHeight();         //                    });         //         //      load_gossip_reply_trait_view(reply_container.find("div.reply_trait_view"),gossip_id,0,0);         });         },         error:function(){         }         });*/    } else {        $(reply_topic_box_container).find('.reply_gossip_text').focus();    }}function load_gossip_comment_submit_reply_view(element) {    load_notification_bar("Loading..");    var reply_container = $(element).parents("div.reply_gossip_content_div").first();    var url = $('#site_url').val() + "gossip/get_gossip_comment_reply_view";    var comment_id = $(element).find(".gossip_comment_id").val();    var gossip_id = $(element).find(".gossip_comment_gossip_id").val();    $.ajax({        url: url,        type: "post",        data: {            comment_id: comment_id        },        success: function (data) {            clear_trait_queue();            $('.reply_gossip_content_div').fadeOut(500).promise().done(function () {                reply_container.html(data);                reply_container.fadeIn(500, function () {                    resizeTabHeight();                });                load_gossip_reply_trait_view(reply_container.find("div.reply_trait_view"), gossip_id, comment_id, 1);                hide_notification_bar();            });        },        error: function () {        }    });}function initiate_load_gossip_comment_view(element) {    var reply_parent = $(element).parents("div.gfm_info").first().prev().prev();    var reply_user_box_container = $(reply_parent).find(".gossiper_comm_ex").find(".gossip_replier");    var reply_topic_box_container = $(reply_parent).find(".goss_topic_extended").find(".gossip_reply_topic");    var gossip_id = $(reply_parent).find(".gossip_id").val();    var trait_container = $(reply_parent).next().find('.reply_content_div').next();    load_gossip_comment_view(element, gossip_id, reply_user_box_container, reply_topic_box_container, "", trait_container);}function load_gossip_comment_view(element, gossip_id, first_col, second_col, third_col, trait_row) {    //var url=$('#site_url').val()+"gossip/get_gossip_comments"; //All Information ToGather    var url = $('#site_url').val() + "gossip_comments/get_user_inf_box_by_comment_id";    var action_btn = $(element).parents(".goss_tell_btn").next().find(".dummy_reply_btn").first();    $(action_btn).attr("view_action", "true");    load_notification_bar("Loading..");    set_effect_on_content_by_element(".center");    $.ajax({        url: url,        type: "post",        data: {            gossip_id: gossip_id        },        success: function (data) {            var resp = JSON.parse(data);            first_col.fadeOut(500, function () {                first_col.html(resp.first_col);            });            first_col.fadeIn(500, function () {                resizeTabHeight();            });            second_col.fadeOut(500, function () {                second_col.html(resp.second_col);            });            second_col.fadeIn(500, function () {                resizeTabHeight();            });            //Trait Box Rows            trait_row.fadeOut(500, function () {                $(this).html(resp.gossip_trait_boxes);                activate_trait_slide_down();            });            trait_row.fadeIn(500, function () {                resizeTabHeight();            });            //Others            trait_row.next().fadeOut(500, function () {                $(this).html(resp.others);                activate_trait_slide_down();            });            trait_row.next().fadeIn(500, function () {                resizeTabHeight();                set_defult_effect_on_content_by_element(0, ".center");                hide_notification_bar();            });            $(element).attr("onclick", "hide_gossip_comments(this)");            $(element).html("Hide all gossip");            $('.scrollbar_large').tinyscrollbar();            $('.scrollbar_small').tinyscrollbar();            $('.scrollbar1').tinyscrollbar();        },        error: function () {        }    });}function load_gossip_reply_trait_view(element, gossip_id, comment_id, comment) {    var url = $('#site_url').val() + "trait_categories/get_gossip_reply_traits_slide_bar";    $.ajax({        url: url,        type: "post",        data: {            gossip_id: gossip_id,            comment_id: comment_id,            comment: comment        },        success: function (data) {            element.fadeOut(500, function () {                element.html(data);                element.fadeIn(500, function () {                    hide_notification_bar();                    set_defult_effect_on_content_by_element(0, '.center');                    resizeTabHeight();                });                /* Not Required For Now*///                   element.find(".slider-range-min").slider({//                        range: "min",//                        value: 37,//                        min: 1,//                        max: 700,//                        slide: function( event, ui ) {//                        }//                   });//                   element.find('.sliding_point').each(function(){//                        $(this).css("left","50.7868%");//                        $(this).html("0");//                        initialize_reply_trait_point($(this),0);//                       //                    });            });        },        error: function () {        }    });}function load_gossip_comment_replies_view(element, row) {    var comment_id = $(element).children().first().val();    var mode = "";    var mode_element = "";    var showed_html = "";    var i = 1;    $(element).children().each(        function () {            if (i == 3) {                showed_html = $(this);            }            i++;        }    );    i = 1;    $(element).children().each(function () {        if (i == 2) {            mode_element = $(this);            mode = $(this).val();        }        i++;    });    if (mode == 0) {        load_gossip_comment_replies_user_inf_box(comment_id, row);        load_gossip_comment_replies_comment_box(comment_id, row);        load_gossip_comment_replies_reply_btn_box(comment_id, row);        i = 1;        $(showed_html).fadeOut(500, function () {            $(showed_html).html("Hide");            $(showed_html).fadeIn(500, function () {                resizeTabHeight();            });        });        $(mode_element).attr("value", 1);    } else {        var z = true;        var reply_count = 1;        var temp_element = $(element).parents(".goss_txt_small_container").first();        while (z) {            if ($(temp_element).next(".gossip_comment_reply").length > 0) {                temp_element = $(temp_element).next(".gossip_comment_reply");                $('#gossip_reply_user_inf_' + row + '_' + reply_count).fadeOut(1000, function () {                    $(this).remove();                });                $('#gossip_reply_btn_' + row + '_' + reply_count).fadeOut(1000, function () {                    $(this).remove();                });                $(temp_element).fadeOut(1000, function () {                    $(this).remove();                });                reply_count++;            } else {                z = false;            }        }        $(showed_html).fadeOut(500, function () {            $(showed_html).html("View all reply");            $(showed_html).fadeIn(500, function () {                resizeTabHeight();            });        });        $(mode_element).attr("value", 0);    }}function load_gossip_comment_replies_user_inf_box(comment_id, row) {    var url = $('#site_url').val() + "gossip_comment_reply/get_user_inf_box_by_comment_id";    $.ajax({        url: url,        type: "post",        data: {            comment_id: comment_id,            row: row        },        success: function (data) {            var i = 1;            $('.gossiper_comm_ex').children().each(function () {                if (i == parseInt(row)) {                    $(this).after(data);                    resizeTabHeight();                }                i++;            });        },        error: function () {        }    });}function load_gossip_comment_replies_comment_box(comment_id, row) {    var url = $('#site_url').val() + "gossip_comment_reply/get_comment_box_by_comment_id";    $.ajax({        url: url,        type: "post",        data: {            comment_id: comment_id,            row: row        },        success: function (data) {            var i = 1;            $('.goss_topic_extended').find(".goss_txt_small_container").each(function () {                if (i == parseInt(row)) {                    $(this).after(data);                    resizeTabHeight();                }                i++;            });        },        error: function () {        }    });}function load_gossip_comment_replies_reply_btn_box(comment_id, row) {    var url = $('#site_url').val() + "gossip_comment_reply/get_reply_button_by_comment_id";    $.ajax({        url: url,        type: "post",        data: {            comment_id: comment_id,            row: row        },        success: function (data) {            var i = 1;            $('.goss_reply_ex').children().each(function () {                if (i == parseInt(row)) {                    $(this).after(data);                    resizeTabHeight();                }                var j = 1;                $('.goss_topic_extended').find(".goss_txt_small_container").each(                    function () {                        if ($(this).find(".dummy_view_all_reply_btn").length == 1) {                            $(this).find(".dummy_view_all_reply_btn").attr("onclick", "load_gossip_comment_replies_view(this,'" + j + "')");                        }                        j++;                    }                );                j++;            });        },        error: function () {        }    });}function load_gossip_view_by_gossip_id() {    var gossip_id = $('#invitation_gossip_id').val();    if ($('#invitation_gossip_id').val() !== "") {        var url = $('#site_url').val() + "gossip/get_gossip_view_from_invitation_mail";        $.ajax(            {                url: url,                type: "post",                data: {gossip_id: gossip_id},                success: function (data) {                    var resp = JSON.parse(data);                    if (parseInt($('#invitation_gossip_for').val()) == 1) {                        $('#gossip_for_content_div').html(resp.content);                    } else if (parseInt($('#invitation_gossip_for').val()) == 0) {                        $('#gossip_from_content_div').html(resp.content);                    }                    resizeTabHeight();                    $('.scrollbar_large').tinyscrollbar();                    $('.scrollbar_small').tinyscrollbar();                    $('.scrollbar1').tinyscrollbar();                }            }        );    }}// Load Function [E]function initialize_reply_trait_point(element, point) {    var question_div = $(element).parents(".range_bar").first().find(".range_qa").first();    var answer_div = $(element).parents(".range_bar").first().find(".range_qa").last();    var trait_category_id = $(element).parents(".range_container").first().next().find(".trait_category_id").val();    $.ajax({        url: $('#site_url').val() + "trait_q_a/get_q_a_by_trait_category_id_and_point",        type: "post",        data: {            trait_category_id: trait_category_id,            point: point        },        success: function (data) {            var resp = JSON.parse(data);            resizeTabHeight();            $(question_div).html(resp.question);            $(answer_div).html(resp.ans);        },        error: function (data) {        }    });}function gossip_reply_trait_point(element) {    var sliding_point = parseInt($(element).css("left").replace(/px$/, ''));    var sliding_parent = parseInt($(element).parent().css("width").replace(/px$/, ''));    var percentage_point = (100 * sliding_point) / sliding_parent;    var point = 0;    if (percentage_point == 0 || percentage_point > 97) {        point = Math.floor(2 * percentage_point - 100);    } else {        point = Math.floor(2 * percentage_point - 100 - 1);    }    $(element).html(point);    var question_div = $(element).parents(".range_bar").first().find(".range_qa").first();    var answer_div = $(element).parents(".range_bar").first().find(".range_qa").last();    var trait_category_id = $(element).parents(".range_container").first().next().find(".trait_category_id").val();    //getting question answer    $.ajax({        url: $('#site_url').val() + "trait_q_a/get_q_a_by_trait_category_id_and_point",        type: "post",        data: {            trait_category_id: trait_category_id,            point: point        },        success: function (data) {            var resp = JSON.parse(data);            resizeTabHeight();            var trait_category_id = resp.trait_categories_id;            var question_id = resp.id;            var fake_point = resp.fake_point;            var trait_inf = get_gossip_reply_trait_inf(trait_category_id, question_id, fake_point);            push_gossip_reply_trait_queue(trait_inf);            $(question_div).html(resp.question);            $(answer_div).html(resp.ans);        },        error: function (data) {        }    });}//Submit Function [S]function submit_trait_like(current_point, rootElement, element) {    var gossip_id       = $(element).find(".gossip_id").val();    var comment_id      = $(element).find(".gossip_comment_id").val();    var main_comment    = $(element).find(".main_comment").val();    var gossiper_id     = $(element).find(".gossipper_id").val();    var point           = current_point;    var url             = $('#site_url').attr("value") + "trait_like/submit_insert_data";    $.ajax({        url: url,        type: "post",        dataType: "json",        data: {            gossip_id: gossip_id,            comment_id: comment_id,            main_comment: main_comment,            gossiper_id: gossiper_id,            point: point        },        success: function (data) {            var resp = data;            if (resp.status) {                chage_notification_content(resp.like+" person like this");                if(resp.hidden !=1) {                    $('#commentText_' + resp.id).html(resp.comment);                }                updateLikeState(point, rootElement);                delay_and_hide_notification_bar(1000);            }else{                alert(resp.msg);            }        }    });}function updateLikeState(point, element) {    var background = "#00A650";    //needs some modification    if (point == 1) {        var current_height = $(element).next().find('.dummy_i_bar').height();        var parent_height = $(element).next().find('.dummy_i_bar').parent().height();        var current_point = (current_height * 100) / parent_height;        if (current_point < 100) {            current_point = current_point + (5);            if(current_point < 50){                background = "#b10606";            }            $(element).next().find('.dummy_i_bar').css({"background": background, "height" : current_point + "%"});        }    } else if (point == -1) {        var current_height = $(element).prev().find('.dummy_i_bar').height();        var parent_height = $(element).prev().find('.dummy_i_bar').parent().height();        var current_point = (current_height * 100) / parent_height;        if (current_point > 0) {            current_point = current_point - 5;            if(current_point < 50){                background = "#b10606";            }            $(element).prev().find('.dummy_i_bar').css({"background": background, "height" : current_point + "%"});        }    }}function old_submit_gossip_reply(element) {    var temp_traits = get_gossip_reply_trait_queue();    var gossip_id = $(element).children().first().val();    var comments_element = $(element).parents(".gfm_goss").first().prev().find(".reply_gossip_text");    var call_back_element = $(element).parents(".other_content_div").first().next().find(".dummy_view_all_gossip_btn");    var comments = $(comments_element).val();    var reply_container = $(element).parents(".reply_trait_view").first().parent();    var url = $('#site_url').attr("value") + "gossip/submit_reply_all_gossip_data";    $(comments_element).css("background", "white");    load_notification_bar("Processing");    set_effect_on_content_by_element('.center');    if (temp_traits != "") {        var trait = JSON.stringify(temp_traits);    } else {        var trait = "";    }    $.ajax({        url: url,        type: "post",        dataType: "json",        data: {            gossip_id: gossip_id,            trait: trait,            comments: comments        },        success: function (data) {            var resp = data;            if (resp.status == "true") {                chage_notification_content(resp.msg);                show_success_then_hide(1000, "");                set_defult_effect_on_content_by_element(0, ".center");                $(reply_container).fadeOut(500, function () {                    $(reply_container).html("");                    $(call_back_element).trigger("click");                });                clear_trait_queue();            } else if (resp.status == "false") {                if (resp.element_id == "reply_gossip_text") {                    $(comments_element).focus();                    $(comments_element).css("background", "none repeat scroll 0% 0% rgb(243, 46, 46)");                    $(comments_element).focusout();                }                chage_notification_content(resp.msg);                show_error_then_hide(3000, "");                set_defult_effect_on_content_by_element(2000, ".center");            }        }    });}function submit_gossip_reply(element, action_btn, call_back_element) {    var url = $('#site_url').attr("value") + "gossip/submit_reply_all_gossip_data";    load_notification_bar("Processing");    set_effect_on_content_by_element('.center');    var trait = ""    var gossip_id = $(element).attr("g_id");    var comments = $(element).val().replace(/(\r\n|\n)/g, "</br>");    $.ajax({        url: url,        type: "post",        dataType: "json",        data: {            gossip_id: gossip_id,            trait: trait,            comments: comments        },        success: function (data) {            var resp = data;            if (resp.status == "true") {                hide_notification_bar();                set_defult_effect_on_content_by_element(0, ".center");                var view_all_reply_btn = $(call_back_element).parents(".goss_tell_btn").first();                $(view_all_reply_btn).next().css("margin-left", "10px");                $(view_all_reply_btn).fadeIn(100, function () {                    initiate_load_gossip_comment_view(this);                });//                    $(reply_container).fadeOut(500,function(){//                        $(reply_container).html("");//                        $(call_back_element).trigger("click");//                       //                    });                $(action_btn).attr("view_action", "true");                clear_trait_queue();            } else if (resp.status == "false") {                if (resp.element_id == "reply_gossip_text") {                    $(comments_element).focus();                    $(comments_element).css("background", "none repeat scroll 0% 0% rgb(243, 46, 46)");                    $(comments_element).focusout();                }                chage_notification_content(resp.msg);                show_error_then_hide(3000, "");                set_defult_effect_on_content_by_element(2000, ".center");            }        }    });}function submit_gossip_comment_reply(element) {    var i = 1;    var temp_traits = get_gossip_reply_trait_queue();    var comment_id = $(element).children().first().val();    var gossip_id = "";    $(element).children().each(function () {        if (i == 2) {            gossip_id = $(this).val();        }        i++;    });    var comments_element = $(element).parents(".gfm_goss").first().prev().find(".reply_gossip_text");    var comments = $(comments_element).val();    var reply_container = $(element).parents(".reply_trait_view").first().parent();    var url = $('#site_url').attr("value") + "gossip/submit_comment_reply_all_gossip_data";    $(comments_element).css("background", "white");    load_notification_bar("Processing");    set_effect_on_content_by_element('.center');    if (temp_traits != "") {        var trait = JSON.stringify(temp_traits);    } else {        var trait = "";    }    $.ajax({        url: url,        type: "post",        dataType: "json",        data: {            comment_id: comment_id,            trait: trait,            comments: comments        },        success: function (data) {            var resp = data;            if (resp.status == "true") {                chage_notification_content(resp.msg);                show_success_then_hide(1000, "");                set_defult_effect_on_content_by_element(0, ".center");                $(reply_container).fadeOut(500, function () {                    $(reply_container).html("");                    load_gossip_comment_view(gossip_id, reply_container);                });                clear_trait_queue();            } else if (resp.status == "false") {                if (resp.element_id == "reply_gossip_text") {                    $(comments_element).focus();                    $(comments_element).css("background", "none repeat scroll 0% 0% rgb(243, 46, 46)");                    $(comments_element).focusout();                }                chage_notification_content(resp.msg);                show_error_then_hide(3000, "");                set_defult_effect_on_content_by_element(2000, ".center");            }        }    });}//Submit Function [E]//Change Functionfunction relation_authintication(element, val) {    var effct_element = $(element).parents(".gfm_info_rel");    load_notification_bar("Processing");    set_effect_on_content_by_element(effct_element);    var id = $(element).attr("rel_id");    var url = $('#site_url').attr("value") + "gossip_relationship/dispute";    $.ajax({        url: url,        type: "post",        data: {            id: id,            val: val        },        success: function (data) {            var resp = JSON.parse(data);            chage_notification_content(resp.msg);            show_success_then_hide(1000, "");            set_defult_effect_on_content_by_element(0, effct_element);            $(element).html(resp.msg);            $(element).attr("onclick", "");            if (resp.msg == "Accepted") {                var modefied_element = $(element).parent().prev().find("a");                $(modefied_element).html("Dispute");                $(modefied_element).attr("onclick", "relation_authintication(this,-1)");            } else {                var modefied_element = $(element).parent().next().find("a");                $(modefied_element).html("Accept");                $(modefied_element).attr("onclick", "relation_authintication(this,1)");            }        },        error: function (e) {        }    });}// Hide/Show [Privacy] Action Functionfunction gossip_privacy_action(element, act_parameter) {    var gossip_id = $(element).attr("g_id");    var effect_element = $(element).parents(".gfm_info").first();    var parent_element = $(element).parents(".gfm_info").first().prev().prev();    load_notification_bar("Processing..");    set_effect_on_content_by_element($(effect_element));    if (parseInt(act_parameter) == 0)        var url = $('#site_url').attr("value") + "gossip/show_gossip";    else if (parseInt(act_parameter) == 1)        var url = $('#site_url').attr("value") + "gossip/hide_gossip";    var gossip_thread = $(parent_element).find(".gossip_th_input");    var gossip_text = $(parent_element).find(".overview");    var gossip_view_all = $(element).parents(".gfm_info").find("#view_all").first();    var goss_thread_hide_icon = $(parent_element).find(".goss_thread_hide");    console.log(gossip_view_all);    $.ajax({        url: url,        type: "post",        data: {            gossip_id: gossip_id        },        success: function (data) {            var resp = JSON.parse(data);            if (resp.status == "true") {                chage_notification_content(resp.msg);                show_success_then_hide(1000, "");                var score=Math.round(Math.abs(parseInt(resp.con_score)));                $("#user_stats_confidence").css("width",resp.con_score+"%");                $("#user_stats_confidence_span_score").html(parseInt(resp.con_score)+"%");                if (resp.state == 0) {                    $(element).html("Hide Gossip");                    $(gossip_thread).html(resp.thread_value);                    $(gossip_text).html(resp.comment);                    $(element).attr("onclick", "gossip_privacy_action(this,1)");                    $(gossip_view_all).show();                    $(goss_thread_hide_icon).fadeOut(500);                } else if (resp.state == 1) {                    $(element).html("Show Gossip");                    $(gossip_thread).html(resp.thread_value);                    $(gossip_text).html(resp.comment);                    $(gossip_view_all).hide();                    $(element).attr("onclick", "gossip_privacy_action(this,0)");                    $(goss_thread_hide_icon).fadeIn(500);                }            } else if (resp.status == "false") {                chage_notification_content(resp.msg);                show_error_then_hide(1000, "");            } else if (resp.status == "faild") {                chage_notification_content(resp.msg);                show_error_then_hide(1000, "");            }            set_defult_effect_on_content_by_element(0, $(effect_element));        },        error: function (e) {        }    });}//Cancel Clear Hide Functionfunction clear_trait_queue() {    $('#gossip_reply_trait_queue').attr("value", "");}function cancel_gossip_reply(element) {    $(element).parents(".reply_content_div").fadeOut(500, function () {        $(this).html("");        $(this).fadeIn(500);        resizeTabHeight();    });}function hide_gossip_comments(element) {    var other_inf_element = $(element).parents(".gfm_info").prev();    var gossip_main_element = $(element).parents(".gfm_info").prev().prev();    var first_col = $(gossip_main_element).find(".gossiper_comm_ex").first();    var second_col = $(gossip_main_element).find(".goss_topic_extended").first();    var third_col = $(gossip_main_element);    $(other_inf_element).children().fadeOut(500, function () {        $(this).html("")    });    $(first_col).find(".goss_small_comment").each(function () {            $(this).fadeOut(500);            $(this).html("");        }    );    $(second_col).find(".goss_txt_small_container").each(function () {            $(this).fadeOut(500, function () {                resizeTabHeight();            });            $(this).html("");        }    );    $(element).attr("onclick", "initiate_load_gossip_comment_view(this)");    $(element).html("View all gossip");}