<?php	 class c_trait_users extends CI_Controller{		 private $id;		 private $user_id;		 private $trait_categories_id;		 private $category;		 private $sub_category_value;		 private $sub_category_hidden;		 private $sub_category_avg_point;		 private $created_date;		 function __construct(){			parent::__construct();			$this->id='';			$this->user_id='';			$this->trait_categories_id='';			$this->category='';			$this->sub_category_value='';			$this->sub_category_hidden='';			$this->sub_category_avg_point='';			$this->created_date=date('Y-m-d');		 }		 function set_id($id)		 {			$this->id=$id;		 }		 function set_user_id($user_id)		 {			$this->user_id=$user_id;		 }         function get_user_id()         {             return $this->user_id;         }		 function set_trait_categories_id($trait_categories_id)		 {			$this->trait_categories_id=$trait_categories_id;		 }         function get_trait_categories_id()         {             return $this->trait_categories_id;         }		 function set_category($category)		 {			$this->category=$category;		 }		 function set_sub_category_value($sub_category_value)		 {			$this->sub_category_value=$sub_category_value;		 }		 function set_sub_category_hidden($sub_category_hidden)		 {			$this->sub_category_hidden=$sub_category_hidden;		 }		 function set_sub_category_avg_point($sub_category_avg_point)		 {			$this->sub_category_avg_point=$sub_category_avg_point;		 }		 function set_created_date($created_date)		 {			$this->created_date=$created_date;		 }                 function get_trait_count(){                     return $this->m_trait_users->get_row_count($this->user_id);                 }                 function get_all_trait_box_in_order_by_user_id($user_id){                        $this->load->model('m_trait_users');                        $trait_box=array();                        $temp_array=array();                        $i=0;                        $j=0;                        $temp_category="";                        foreach($this->m_trait_users->get_all_by_user_id($user_id) as $rowData){                           if( $temp_category==""){                               $temp_category=$rowData->category;                           }                           if($temp_category==$rowData->category){                               $temp_array[$i]['id']=$rowData->id;                               $temp_array[$i]['trait_categories_id']=$rowData->trait_categories_id;                               $temp_array[$i]['category']=$rowData->category;                               $temp_array[$i]['sub_category_value']=$rowData->sub_category_value;                               $temp_array[$i]['sub_category_hidden']=$rowData->sub_category_hidden;                               $temp_array[$i]['sub_category_avg_point']=$rowData->sub_category_avg_point;                               $i++;                           }else{                               $i=0;                               $trait_box[$j++]=$temp_array;                               $temp_array=null;                               $temp_category=$rowData->category;                               $temp_array[$i][0]=$rowData->id;                               $temp_array[$i][1]=$rowData->category;                               $temp_array[$i][2]=$rowData->sub_category;                               $i++;                           }                        }                        if($temp_array!=null){                               $trait_box[$j++]=$temp_array;                        }                        return $trait_box;                 }		 function insert_row_data(){			$this->load->model('m_trait_users');			$insert_array_data=array(					 'user_id' => $this->user_id,					 'trait_categories_id' => $this->trait_categories_id,					 'category' => $this->category,					 'sub_category_value' => $this->sub_category_value,					 'sub_category_hidden' => $this->sub_category_hidden,					 'sub_category_avg_point' => $this->sub_category_avg_point,					 'created_date' => $this->created_date					 );			return $this->m_trait_users->insert_row_data($insert_array_data);		 }                 function update_row_data(){			$this->load->model('m_trait_users');			$update_data_array=array(					 'sub_category_avg_point' => $this->sub_category_avg_point,					 'created_date' => $this->created_date					 );			return $this->m_trait_users->update_row_data($this->user_id,$this->trait_categories_id,$update_data_array);		 }                 function change_avg_point(){                     $this->load->model('m_trait_users');                     if(!$this->m_trait_users->has_avg_point($this->user_id,$this->trait_categories_id)){                        return $this->insert_row_data();                     }else{                        return $this->update_row_data();                     }                 }                 function change_sub_category_hidden(){                      $this->load->model('m_trait_users');                      $sub_category_hidden=$this->m_trait_users->get_sub_category_hidden($this->user_id,$this->trait_categories_id);                      if($sub_category_hidden==1){                          $sub_category_hidden=0;                          $update_data_array=array('sub_category_hidden'=>$sub_category_hidden);                      }else{                          $sub_category_hidden=1;                          $update_data_array=array('sub_category_hidden'=>$sub_category_hidden);                      }                      if($this->m_trait_users->update_row_data($this->user_id,$this->trait_categories_id,$update_data_array))                        return $sub_category_hidden;                      return -1;                 }	 }