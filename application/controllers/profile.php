<?phpclass profile extends CI_Controller{    private $u_id;    private $gender;    private $pageData;    private $site_url;    private $sign_in;    private $sign_up;    private $sign_out;    private $search;    private $home;    function __construct(){        parent::__construct();        $this->load->helper('url');        $this->pageData = array();        include_once(APPPATH . 'controllers/common_site_setting.php');        include_once(APPPATH . 'controllers/class_file/site_url.php');        include_once(APPPATH . 'controllers/class_file/initailize_header_operation.php');        include_once(APPPATH . 'controllers/load_common_properties_of_user.php');        $this->sign_in = FALSE;        $this->sign_up = FALSE;        $this->sign_out = TRUE;        $this->search = FALSE;        $this->home = FALSE;    }    function index(){        //redirect(base_url());        //die();        print_r($_REQUEST);        die;        $this->load->helper('url');        $this->load->model('m_user_login');        $this->load->model('m_user_basic_info');        $gossiper = trim($this->input->get('gossiper'));        $email = $this->m_user_login->get_email_by_id($gossiper);        $target_user_first_name = $this->m_user_basic_info->get_first_name_by_u_id($gossiper);        $target_user_last_name = $this->m_user_basic_info->get_last_name_by_u_id($gossiper);        $this->session->set_userdata('profile_email', array('email' => $email));        $onload_js_fn = '';        if (isset($_REQUEST['action'])) {            $onload_js_fn = "?action=" . $_REQUEST['action'];        }        if (isset($_REQUEST['g_id'])) {            $invitation_g_id = trim($_REQUEST['g_id']);            $invitation_for = trim($_REQUEST['for']);            redirect(base_url() . "profile/view/" . trim(str_replace(" ", "", $target_user_first_name)) . "." . trim(str_replace(" ", "", $target_user_last_name)) . "/gossip/" . $invitation_g_id . "/" . $invitation_for);        } else {            redirect(base_url() . "profile/view/" . trim(str_replace(" ", "", $target_user_first_name)) . "." . trim(str_replace(" ", "", $target_user_last_name)) . $onload_js_fn);        }        //$this->load->view('make_gossip',$this->pageData);    }    function view($id = null){        //$this->load->library('dynamic_alog_equ_lib');        //echo $this->dynamic_alog_equ_lib->get_component_value('rank',$this->u_id); die();        if ($id == null) {            redirect(base_url());            die();        }        $email = $this->m_user_login->get_email_by_id($id);        if ($email == null || $email == '') {            redirect(base_url());            die();        }        $this->sign_out = TRUE;        $this->search = TRUE;        $invitation_gossip_id = $this->uri->segment(5);        $invitation_gossip_for = $this->uri->segment(6);        $session_data = $this->session->userdata('profile_email');        //$u_id = $this->m_user_login->get_id_by_email($session_data['email']);        $u_id = $this->m_user_login->get_id_by_email($email);        if ($this->u_id == $u_id || $u_id == "") {            redirect(base_url());            die();        }        $this->pageData['onload_js_fn'] = '';        if (isset($_REQUEST['action'])) {            $this->pageData['onload_js_fn'] = $_REQUEST['action'];        }        $this->load->model('m_uesr_profile_data_hidden');        $this->load->model('m_developer_gossip_relationship');        $this->load->model('m_developer_gossip_insider');        $this->load->model('m_user_basic_info');        $this->load->model('m_user_favorite');        $this->load->model('m_trait_users');        $this->load->model('m_trait_categories');        $this->load->model('m_gossip_main');        include_once(APPPATH . 'controllers/class_file/c_information.php');        include_once(APPPATH . 'controllers/class_file/c_trait_categories.php');        include_once(APPPATH . 'controllers/class_file/encrypt_tbl_primary_key.php');        include_once(APPPATH . 'controllers/class_file/c_gossip_main.php');        // Caculating Visitor and increase popularity in insert_row_data        include_once(APPPATH . 'controllers/class_file/c_user_visitor_details.php');        $c_user_visitor_details_obj = new c_user_visitor_details();        $visitor_id = $this->u_id;        $visitor_ip = $this->input->ip_address();        $host_id = $u_id;        $c_user_visitor_details_obj->set_visitor_id($visitor_id);        $c_user_visitor_details_obj->set_visitor_ip($visitor_ip);        $c_user_visitor_details_obj->set_host_id($host_id);        if ($c_user_visitor_details_obj->insert_row_data()) {        } else {        }        unset($c_user_visitor_details_obj);        $encrypt_tbl_primary_key_obj = new encrypt_tbl_primary_key();        $c_trait_categories_obj = new c_trait_categories();        $c_gossip_main_obj = new c_gossip_main();        $c_information_obj = new c_information(); // If any object of class_file folder created after that an error occure . Reason still UNKNOWN        $this->pageData['guest_gossip_reply'] = $c_information_obj->get_inf_for_gossip_reply($this->u_id);        $this->pageData['is_favorite'] = $this->m_user_favorite->is_exist($this->u_id, $u_id);        $this->pageData['profile_owner_email'] = $email;//$session_data['email'];        $this->pageData['gender'] = "";        $this->pageData['birthday'] = "";        $this->pageData['location'] = "";        $this->pageData['home_town'] = "";        $this->pageData['high_school'] = "";        $this->pageData['higher_education'] = "";        $this->pageData['work_place'] = "";        $this->pageData['organization'] = "";        $this->pageData['static_gossip_relationship'] = $this->m_developer_gossip_relationship->get_all();        $this->pageData['static_gossip_insider'] = $this->m_developer_gossip_insider->get_all();        $this->pageData['encrypt_tbl_primary_key_obj'] = $encrypt_tbl_primary_key_obj;        foreach ($this->m_uesr_profile_data_hidden->get_all_profule_data_hiden($u_id) as $rowData) {            $this->pageData['gender'] = $rowData->gender;            $this->pageData['birthday'] = $rowData->birthday;            $this->pageData['location'] = $rowData->location;            $this->pageData['home_town'] = $rowData->home_town;            $this->pageData['high_school'] = $rowData->high_school;            $this->pageData['higher_education'] = $rowData->higher_education;            $this->pageData['work_place'] = $rowData->work_place;            $this->pageData['organization'] = $rowData->organization;        }        $this->pageData['gossip_for_him_count'] = $this->m_gossip_main->get_total_gossip_count_by_target_id($u_id);        $this->pageData['gossip_from_him_count'] = $this->m_gossip_main->get_total_gossip_count_by_gossipper_id($u_id);        $this->pageData['gossiper_profile_pic'] = $this->m_user_basic_info->get_pic_path_by_u_id($this->u_id);        $this->pageData['target_id'] = $encrypt_tbl_primary_key_obj->get_encrypted_code($u_id);        $this->pageData['static_traits'] = $c_trait_categories_obj->get_all_trait_box_in_order();        $this->pageData['traits_sub_category'] = $this->m_trait_categories->get_traits_all_order_by_sub_category();        $this->pageData['trait_dynamic_id'] = 0;        $this->pageData['category_tree'] = $this->m_trait_categories->get_subcategories_in_categories_tree();        //User's Trait Boxes Data        $this->pageData['traits_user'] = $c_trait_categories_obj->get_all_trait_box_in_order_by_user_id($u_id);        // User's Basic Information        $this->pageData += $c_information_obj->get_user_infomation_by_u_id($u_id);        unset($c_information_obj);        // User's Gossip for him/me        $this->pageData += $c_gossip_main_obj->get_gossip_row_view_by_target_id($u_id);        $this->pageData['gossip_person'] = $encrypt_tbl_primary_key_obj->get_encrypted_code($u_id);        // User's Gossip from him/me        $this->pageData += $c_gossip_main_obj->get_gossip_row_view_by_target_id($u_id, TRUE);        unset($c_gossip_main_obj);        $this->pageData['gossip_person'] = $encrypt_tbl_primary_key_obj->get_encrypted_code($u_id);        //Make Gossip        $this->pageData['gossip_gender'] = $this->m_user_basic_info->get_gender_by_u_id($u_id);        $this->pageData['target_gender'] = $this->m_user_basic_info->get_gender_by_u_id($u_id);        if ($this->pageData['target_gender'] == "male") {            $this->pageData['gossip_for_whom'] = "Him";        } else {            $this->pageData['gossip_for_whom'] = "Her";        }        $this->pageData['view_make_gossip'] = true;        // Onload Gossip View From Invitation View        $this->pageData['invitation_gossip_id'] = $invitation_gossip_id;        $this->pageData['invitation_gossip_for'] = $invitation_gossip_for;        //Rendering View        $this->load->view('view_public_profile', $this->pageData);    }    function test(){        include_once(APPPATH . 'controllers/class_file/c_gossip.php');        $c_gossip_obj = new c_gossip();        $r = $c_gossip_obj->index();        echo $r;    }}?>