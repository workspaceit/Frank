<?phpclass my_profile extends CI_Controller{    private $u_id;    private $gender;    private $pageData;    private $site_url;    private $sign_in;    private $sign_up;    private $sign_out;    private $search;    private $home;    function __construct(){        parent::__construct();        $this->load->helper('url');        //$this->load->model('m_user_group');        $this->pageData = array();        include_once(APPPATH . 'controllers/common_site_setting.php');        include_once(APPPATH . 'controllers/class_file/site_url.php');        include_once(APPPATH . 'controllers/class_file/initailize_header_operation.php');        include_once(APPPATH . 'controllers/load_common_properties_of_user.php');        $this->sign_in = FALSE;        $this->sign_up = FALSE;        $this->sign_out = TRUE;        $this->search = TRUE;        $this->home = FALSE;        //$this->pageData['myGroupList'] = $this->m_user_group->get_grouplist_by_user_id($this->u_id);        //$this->load->library('dynamic_alog_equ_lib');        //$this->dynamic_alog_equ_lib->get_component_value('rank');    }    function index(){        $this->load->model('m_uesr_profile_data_hidden');        $this->load->model('m_trait_categories');        $this->load->model('m_trait_users');        $this->load->model('m_developer_gossip_relationship');        $this->load->model('m_developer_gossip_insider');        include_once(APPPATH . 'controllers/class_file/c_information.php');        include_once(APPPATH . 'controllers/class_file/c_trait_categories.php');        include_once(APPPATH . 'controllers/class_file/encrypt_tbl_primary_key.php');        include_once(APPPATH . 'controllers/class_file/c_gossip_main.php');        $encrypt_tbl_primary_key_obj = new encrypt_tbl_primary_key();        $c_trait_categories_obj = new c_trait_categories();        $c_gossip_main_obj = new c_gossip_main();        $c_information_obj = new c_information();        $this->pageData['gender'] = "";        $this->pageData['birthday'] = "";        $this->pageData['location'] = "";        $this->pageData['home_town'] = "";        $this->pageData['high_school'] = "";        $this->pageData['higher_education'] = "";        $this->pageData['work_place'] = "";        $this->pageData['organization'] = "";        foreach ($this->m_uesr_profile_data_hidden->get_all_profule_data_hiden($this->u_id) as $rowData) {            $this->pageData['gender'] = $rowData->gender;            $this->pageData['birthday'] = $rowData->birthday;            $this->pageData['location'] = $rowData->location;            $this->pageData['home_town'] = $rowData->home_town;            $this->pageData['high_school'] = $rowData->high_school;            $this->pageData['higher_education'] = $rowData->higher_education;            $this->pageData['work_place'] = $rowData->work_place;            $this->pageData['organization'] = $rowData->organization;        }        $this->pageData['category_tree'] = $this->m_trait_categories->get_subcategories_in_categories_tree();        $this->pageData['guest_gossip_reply'] = $c_information_obj->get_inf_for_gossip_reply($this->u_id);        $this->pageData['static_gossip_relationship'] = $this->m_developer_gossip_relationship->get_all();        $this->pageData['static_gossip_insider'] = $this->m_developer_gossip_insider->get_all();        $this->pageData['encrypt_tbl_primary_key_obj'] = $encrypt_tbl_primary_key_obj;        $this->pageData['target_id'] = $encrypt_tbl_primary_key_obj->get_encrypted_code($this->u_id);        $this->pageData['static_traits'] = $c_trait_categories_obj->get_all_trait_box_in_order();        $this->pageData['traits_sub_category'] = $this->m_trait_categories->get_traits_all_order_by_sub_category();        $this->pageData['trait_dynamic_id'] = 0;        $this->pageData += $c_information_obj->get_user_infomation_by_u_id($this->u_id);        //User's Trait Boxes Data        $this->pageData['traits_user'] = $c_trait_categories_obj->get_all_trait_box_in_order_by_user_id($this->u_id, true);        // User's Gossip for him/me        $this->pageData += $c_gossip_main_obj->get_gossip_row_view_by_target_id($this->u_id);        // User's Gossip from him/me        $this->pageData += $c_gossip_main_obj->get_gossip_row_view_by_target_id($this->u_id, TRUE);        unset($c_gossip_main_obj);        //User's Gossip Other Required Variable        $this->pageData['gossip_person'] = $encrypt_tbl_primary_key_obj->get_encrypted_code($this->u_id);        $this->pageData['gossip_for_whom'] = "Me";        $this->pageData['view_make_gossip'] = false;        $this->load->view('my_profile_operational_view', $this->pageData);    }    function change_profile_picture_by_u_id(){        include_once(APPPATH . 'controllers/class_file/c_user_basic_info.php');        $pic_path = $this->input->post('profile_picture');        $c_user_basic_info_obj = new c_user_basic_info();        $c_user_basic_info_obj->set_u_id($this->u_id);        $c_user_basic_info_obj->set_pic_path($pic_path);        $c_user_basic_info_obj->updateRow_BY_id($this->u_id);    }    function preferences()    {        $this->load->model("m_user_basic_info");        $this->load->model("m_trait_categories");        $this->load->model("m_user_trait_final_values");        include_once(APPPATH . 'controllers/class_file/encrypt_tbl_primary_key.php');        include_once(APPPATH . 'controllers/class_file/c_trait_categories.php');        include_once(APPPATH . 'controllers/class_file/c_information.php');        $c_information = new c_information();        $this->pageData["uInf"] = $c_information->get_user_infomation_by_u_id($this->u_id);        $c_trait_categories_obj = new c_trait_categories();        $encryptObj = new encrypt_tbl_primary_key();        $this->pageData['trait_final_values'] = $this->m_user_trait_final_values->get_value_by_userid($this->u_id);        $this->pageData['traits_user'] = $c_trait_categories_obj->get_all_trait_box_in_order_by_user_id($this->u_id, true);        $this->pageData['encrypt_tbl_primary_key_obj'] = $encryptObj;        $this->pageData['trait_info'] = $this->m_trait_categories->get_all();        $this->pageData['profile_picture'] = $this->pageData["uInf"]["basic_info_all"][0]->pic_path;        $this->pageData['name'] = $this->pageData["uInf"]["basic_info_all"][0]->f_name.' '.$this->pageData["uInf"]["basic_info_all"][0]->l_name;        $this->load->view('my_profile/preferences.php', $this->pageData);    }    function update_preference_string() {        include_once(APPPATH.'controllers/class_file/c_user_profile_settings.php');        $user_preference_settings_obj=new c_user_profile_settings();        $home_page=$this->input->post('home_page');        $security=$this->input->post('security');        $gossip=$this->input->post('gossip');        $notification=$this->input->post('notification');        $user_preference_settings_obj->set_home_page($home_page);        $user_preference_settings_obj->set_col_security($security);        $user_preference_settings_obj->set_gossip($gossip);        $user_preference_settings_obj->set_notification($notification);        if($user_preference_settings_obj->updateRow_BY_u_id($this->u_id))            echo ";True;";        else            echo ";False;";    }    function update_invite_friends_data(){        include_once(APPPATH.'controllers/class_file/c_user_invitation.php');        include_once(APPPATH.'controllers/class_file/custom_mail.php');        $this->load->model("m_user_basic_info");        $userFullName = $this->m_user_basic_info->get_first_name_by_u_id($this->u_id);        $friend_name=$this->input->post('friend_name');        $friend_email=$this->input->post('friend_email');        $user_invitation_obj=new c_user_invitation();        $custom_mail = new custom_mail();        $custom_mail->send_invitation_mail($userFullName,$friend_name,$friend_email);        $user_invitation_obj->set_u_id($this->u_id);        $user_invitation_obj->set_friend_email($friend_name);        $user_invitation_obj->set_friend_name($friend_email);        if($user_invitation_obj->insertRow($this->u_id)) {            echo ";True;";        }else{            echo ";False;";        }    }}